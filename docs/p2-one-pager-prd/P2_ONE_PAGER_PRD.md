# P2 One-Page PRD (формулировка результата)

Связанный discovery: `../p1-discovery/P1_DISCOVERY.md`

## 1. Problem Statement
Разработчики в больших Go-монорепозиториях (Prometheus ecosystem) тратят слишком много времени на понимание взаимосвязей кода: вызовы, поток данных, архитектурные зависимости пакетов. Обычные IDE и grep плохо показывают причинно-следственные связи между сущностями на масштабе сотен тысяч узлов.

## 2. Product Goal
Сделать web-IDE, где граф является основным интерфейсом исследования CPG, чтобы инженер мог ответить на ключевые вопросы по незнакомому коду за минуты, а не часы.

## 3. Target User
Primary user: Senior Go Engineer / SRE в observability-команде.

Ключевые задачи пользователя:
1. Быстро понять call-neighborhood функции.
2. Проследить data flow переменной (forward/backward).
3. Оценить архитектурный контекст и blast radius изменений.

## 4. Value Proposition
Инструмент сокращает time-to-insight за счет:
- фокусных подграфов (10-100 узлов) вместо перегруженной полной карты;
- мгновенного перехода из графа в исходный код;
- преднастроенных сценариев анализа (Calls, Dataflow, Packages).

## 5. MVP Scope (P2 фиксирует то, что идем реализовывать)
**In scope**
1. Graph-first UI с центральным canvas.
2. Calls explorer (BFS-neighborhood).
3. Dataflow slice (forward/backward).
4. Package dependency map.
5. Source panel и drill-down из узлов графа.
6. Полный запуск через `docker compose up` без ручной настройки.

**Out of scope**
1. Multi-user collaboration.
2. Аутентификация/RBAC/SSO.
3. Полная отрисовка всего CPG без лимитов.

## 6. Success Metrics (для прототипа)
1. p95 времени построения подграфа <= 2 сек (при лимитах).
2. Task success rate по 3 ключевым сценариям >= 80%.
3. Median time-to-insight <= 3 минут на сценарий.
4. Стабильный запуск окружения через Docker на чистой машине.

## 7. UX Principles
1. Граф в центре, панели только поддерживают контекст.
2. Один клик = одно осмысленное действие (expand, focus, open source).
3. Всегда явные состояния `loading/empty/error`.
4. Никаких «бесконечных» графов: только управляемое расширение.

## 8. Technical Constraints
1. Работа с CPG SQLite размера ~900MB+.
2. Сотни тысяч узлов и миллионы ребер в полном наборе.
3. На UI отдавать только ограниченные и релевантные подграфы.
4. Docker compose обязателен как основной способ проверки.

## 9. Key Risks and Validation Plan
1. Риск: тяжелые запросы и фризы UI.
   Валидация: нагрузочный smoke на реальной БД + серверные лимиты.
2. Риск: пользователь теряется в графе.
   Валидация: сценарий «найди источник проблемы» на 2-3 тестовых кейсах.
3. Риск: нестабильный первый запуск.
   Валидация: тест `docker compose up` на чистом окружении.

## 10. Release Readiness (для демо)
1. Все MVP user stories проходят end-to-end.
2. README содержит четкий quick start и troubleshooting.
3. Ошибки и пустые ответы не ломают UX.
4. Есть понятный demo script на 5-7 минут.
