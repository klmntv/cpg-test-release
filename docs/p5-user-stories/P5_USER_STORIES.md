# P5 User Stories (MVP + Should)

Связанные документы:
- `../p4-user-story-mapping/P4_USER_STORY_MAPPING.md`
- `../p3-scope/P3_SCOPE_PLAN.md`

## 1. MVP User Stories (Must)

| ID | User Story | Priority | Acceptance Criteria |
|---|---|---|---|
| US-01 | Как инженер, я открываю режим `Calls` и строю call-neighborhood выбранной функции, чтобы быстро понять окружение изменений. | Must | Граф строится за p95 <= 2с; на экране 10-60 узлов по умолчанию; есть контроль глубины/лимита. |
| US-02 | Как инженер, я кликаю узел в графе и вижу связанные детали и исходный код, чтобы подтвердить гипотезу по логике функции. | Must | Клик по узлу открывает detail + source; при отсутствии исходника показывается явное сообщение, UI не ломается. |
| US-03 | Как инженер, я выбираю переменную и запускаю `forward`/`backward` dataflow slice, чтобы найти источник и эффект данных. | Must | Оба направления работают; путь ограничен лимитами; ошибочный запрос возвращает понятную ошибку. |
| US-04 | Как инженер, я открываю `Packages` и вижу граф зависимостей пакетов, чтобы оценить архитектурный контекст. | Must | Отображаются узлы/ребра зависимостей; можно выбрать пакет и перейти к деталям. |
| US-05 | Как проверяющий, я запускаю `docker compose up` и получаю полностью рабочее приложение без ручных шагов настройки. | Must | Чистый запуск проходит; UI доступен; основные сценарии US-01..US-04 выполняются end-to-end. |
| US-06 | Как инженер, я вижу корректные состояния `loading`, `empty`, `error` в каждом режиме, чтобы понимать состояние системы. | Must | Во всех режимах присутствуют 3 состояния; ошибки не приводят к blank screen. |

## 2. Should User Stories

| ID | User Story | Priority | Acceptance Criteria |
|---|---|---|---|
| US-07 | Как инженер, я ищу символ по имени и перехожу в нужный граф-контекст, чтобы сократить время входа в анализ. | Should | Поиск возвращает релевантные результаты; выбор результата перестраивает контекст графа. |
| US-08 | Как инженер, я вижу context trail переходов, чтобы быстро возвращаться к предыдущим шагам анализа. | Should | История текущей сессии доступна и кликабельна; восстановление контекста работает. |
| US-09 | Как инженер, я управляю лимитами подграфа, чтобы избежать перегрузки интерфейса на больших данных. | Should | Лимиты применяются на backend; UI показывает текущие ограничения. |

## 3. Non-Functional Stories

| ID | User Story | Priority | Acceptance Criteria |
|---|---|---|---|
| NFR-01 | Как пользователь, я ожидаю предсказуемой производительности на полном датасете, чтобы инструмент был пригоден в реальной работе. | Must | Для типовых запросов p95 <= 2с; нет UI-freeze > 3с при обычной навигации. |
| NFR-02 | Как пользователь, я ожидаю отказоустойчивого поведения при тяжелых запросах, чтобы не терять контекст анализа. | Must | Таймауты и ошибки обрабатываются контролируемо; приложение остается интерактивным. |
| NFR-03 | Как команда, мы ожидаем повторяемого запуска окружения, чтобы демо и проверка не зависели от локальной ручной настройки. | Must | `docker compose up` воспроизводим на чистой машине по README. |

## 4. Story Quality Check (INVEST)
1. `Independent`: истории разделены по пользовательским действиям.
2. `Negotiable`: UI-детали и конкретная визуальная форма не зафиксированы жестко.
3. `Valuable`: каждая история уменьшает time-to-insight.
4. `Estimable`: истории имеют измеримые критерии приемки.
5. `Small`: каждая история укладывается в часть 24h timebox.
6. `Testable`: для каждой истории есть проверяемый outcome.

## 5. Приоритетный порядок реализации
1. US-05 -> US-01 -> US-02
2. US-03 -> US-04 -> US-06
3. US-09 -> US-07 -> US-08
